{"ast":null,"code":"var _jsxFileName = \"D:\\\\C_Fashion_Shopping\\\\Frontend\\\\src\\\\pages\\\\AdminPage\\\\ListDisplay.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { Table, Input, Pagination, Spin, Modal, Form } from \"antd\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport toast from \"react-hot-toast\";\nimport axios from \"axios\";\nimport { getColumnsConfig } from \"src/constants/columnsConfig\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URLS = {\n  product: \"/api/products/all\",\n  brand: \"/api/brands/all\",\n  category: \"/api/categories/all\",\n  discount: \"/api/discounts/all\",\n  variant: \"/api/variants/all\",\n  image: \"/api/images/all\",\n  color: \"/api/colors/all\",\n  size: \"/api/sizes/all\",\n  material: \"/api/materials/all\",\n  supplier: \"/api/suppliers/all\",\n  role: \"/api/roles/all\"\n};\nconst ListDisplay = () => {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalItems, setTotalItems] = useState(0);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [category, setCategory] = useState(\"product\");\n  const [updateApi, setUpdateApi] = useState(\"\");\n  const [editingKey, setEditingKey] = useState(null);\n  const [editingValue, setEditingValue] = useState(\"\");\n  const [pageSize, setPageSize] = useState(5); // Default page size is 8\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [detailData, setDetailData] = useState(null);\n  const [selectedId, setSelectedId] = useState(null);\n  useEffect(() => {\n    const map = {\n      product: \"products\",\n      brand: \"brands\",\n      category: \"categories\",\n      discount: \"discounts\",\n      variant: \"variants\",\n      image: \"images\",\n      color: \"colors\",\n      size: \"sizes\",\n      material: \"materials\",\n      supplier: \"suppliers\",\n      role: \"roles\"\n    };\n    setUpdateApi(map[category]);\n  }, [category]);\n  useEffect(() => {\n    // Set page size tùy theo category có ảnh hay không\n    const categoriesWithImage = [\"brand\", \"image\"]; // các bảng có ảnh logo, image,...\n    if (categoriesWithImage.includes(category)) {\n      setCurrentPage(1);\n      setPageSize(5);\n    } else {\n      setPageSize(6);\n      setCurrentPage(1);\n    }\n  }, [category]);\n  useEffect(() => {\n    fetchData();\n  }, [currentPage, category, pageSize]);\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_URLS[category]}?page=${currentPage - 1}&size=${pageSize}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const {\n        content,\n        totalElements\n      } = response.data;\n      if (totalElements === 0 && currentPage > 1) {\n        setCurrentPage(1);\n      } else {\n        setData(content);\n        setTotalItems(totalElements);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Lỗi khi tải dữ liệu!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleToggleActive = async (itemId, newStatus) => {\n    const idKey = `${category}Id`;\n    try {\n      const response = await axios.patch(`/api/${updateApi}/${itemId}/status?isActive=${newStatus}`, {}, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      if (response.data.success) {\n        toast.success(\"Cập nhật trạng thái thành công!\");\n        setData(prevData => prevData.map(item => item[idKey] === itemId ? {\n          ...item,\n          // Dùng key khác nếu là `role`\n          [category === \"role\" ? \"loginAllowed\" : \"isActive\"]: newStatus\n        } : item));\n      } else {\n        var _response$data;\n        toast.error((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.message) || \"Lỗi khi cập nhật trạng thái!\");\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      toast.error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Lỗi kết nối server!\");\n    }\n  };\n  const handleImageChange = async (e, record) => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file) return;\n    const idKey = `${category}Id`;\n    const updateUrl = `/api/${updateApi}/${record[idKey]}/upload`;\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    try {\n      const updatedItem = {\n        ...record,\n        logo: file.name // hoặc giữ nguyên path nếu backend không cần tên mới\n      };\n      const formPayload = new FormData();\n      formPayload.append(\"logo\", file);\n      const res = await axios.put(updateUrl, formPayload, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      const newLogoUrl = res.data.logo;\n      setData(prevData => prevData.map(item => item[idKey] === record[idKey] ? {\n        ...item,\n        logo: newLogoUrl\n      } : item));\n      toast.success(\"Cập nhật ảnh thành công!\");\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      toast.error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"⚠️ Lỗi khi cập nhật ảnh!\");\n    }\n  };\n  const handleEdit = (record, dataIndex) => {\n    setEditingKey(`${record[`${category}Id`]}-${dataIndex}`);\n    setEditingValue(record[dataIndex]);\n  };\n  const saveEdit = async (record, dataIndex) => {\n    const idKey = `${category}Id`;\n    const updateUrl = `/api/${updateApi}/${record[idKey]}`;\n    try {\n      const updatedItem = {\n        ...record,\n        [dataIndex]: editingValue\n      };\n      await axios.put(updateUrl, updatedItem, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const newData = [...data];\n      const index = newData.findIndex(item => item[idKey] === record[idKey]);\n      if (index > -1) {\n        newData[index] = updatedItem;\n        setData(newData);\n        toast.success(\"Cập nhật thành công!\");\n      }\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      toast.error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || \"⚠️ Lỗi khi cập nhật dữ liệu!\");\n    } finally {\n      setEditingKey(null);\n      setEditingValue(\"\");\n    }\n  };\n  const handleIdDoubleClick = async id => {\n    const apiMap = {\n      product: `/api/products/${id}`,\n      brand: `/api/brands/${id}`,\n      category: `/api/categories/${id}`,\n      discount: `/api/discounts/${id}`\n    };\n    try {\n      const res = await axios.get(apiMap[category], {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      setDetailData(res.data);\n      setSelectedId(id);\n      setShowDetailModal(true);\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      toast.error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || \"Không thể tải chi tiết!\");\n    }\n  };\n  const handleDelete = async record => {\n    const idKey = `${category}Id`;\n    const deleteUrl = `/api/${updateApi}/${record[idKey]}`;\n    try {\n      const response = await axios.delete(deleteUrl, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      if (response.data.success) {\n        toast.success(\"Xóa thành công!\");\n        setData(prevData => prevData.filter(item => item[idKey] !== record[idKey]));\n      } else {\n        toast.error(\"Lỗi khi xóa!\");\n      }\n    } catch (error) {\n      var _error$response6, _error$response6$data;\n      toast.error(((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.message) || \"⚠️ Lỗi kết nối khi xóa!\");\n    }\n  };\n  const renderCell = (text, record, dataIndex) => {\n    const isEditing = editingKey === `${record[`${category}Id`]}-${dataIndex}`;\n    if (isEditing) {\n      return /*#__PURE__*/_jsxDEV(Input, {\n        value: editingValue,\n        onChange: e => setEditingValue(e.target.value),\n        onPressEnter: () => saveEdit(record, dataIndex),\n        onBlur: () => saveEdit(record, dataIndex),\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onDoubleClick: () => handleEdit(record, dataIndex),\n      children: text || /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"text-gray-400\",\n        children: \"Ch\\u01B0a c\\xF3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }, this);\n  };\n  const categories = [{\n    value: \"product\",\n    label: \"Sản phẩm\"\n  }, {\n    value: \"variant\",\n    label: \"Biến thể\"\n  }, {\n    value: \"image\",\n    label: \"Hình ảnh sản phẩm\"\n  }, {\n    value: \"color\",\n    label: \"Màu sắc\"\n  }, {\n    value: \"size\",\n    label: \"Kích thước\"\n  }, {\n    value: \"material\",\n    label: \"Chất liệu\"\n  }, {\n    value: \"supplier\",\n    label: \"Nhà cung cấp\"\n  }, {\n    value: \"role\",\n    label: \"Vai trò\"\n  }, {\n    value: \"brand\",\n    label: \"Thương hiệu\"\n  }, {\n    value: \"category\",\n    label: \"Loại sản phẩm\"\n  }, {\n    value: \"discount\",\n    label: \"Mã giảm giá\"\n  }];\n  const columns = getColumnsConfig(category, renderCell, handleToggleActive, handleImageChange, handleIdDoubleClick, handleDelete);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 rounded-lg shadow-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-3\",\n        children: categories.map(cat => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCategory(cat.value),\n          className: `px-5 py-2 rounded-lg text-sm font-semibold transition-all ${category === cat.value ? \"bg-gradient-to-r from-green-500 to-green-700 text-white shadow-md\" : \"bg-gray-300 text-gray-800 hover:bg-green-500 hover:text-white\"}`,\n          children: cat.label\n        }, cat.value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        prefix: /*#__PURE__*/_jsxDEV(SearchOutlined, {\n          className: \"text-gray-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 29\n        }, this),\n        placeholder: \"T\\xECm ki\\u1EBFm...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value),\n        className: \"w-72 px-4 py-2 rounded-lg border border-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500 transition-all bg-white shadow-sm focus:shadow-lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border border-green-300 rounded-lg shadow-md overflow-hidden\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center p-4\",\n        children: /*#__PURE__*/_jsxDEV(Spin, {\n          size: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(Table, {\n        columns: getColumnsConfig(category, renderCell, handleToggleActive, handleImageChange, handleIdDoubleClick, handleDelete),\n        dataSource: data,\n        pagination: false,\n        rowKey: record => record[`${category}Id`],\n        rowClassName: (record, index) => index % 2 === 0 ? \"bg-green-100\" : \"bg-white\",\n        className: \"border-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end mt-4\",\n      children: /*#__PURE__*/_jsxDEV(Pagination, {\n        current: currentPage,\n        pageSize: pageSize,\n        total: totalItems,\n        onChange: setCurrentPage,\n        showSizeChanger: false,\n        showQuickJumper: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: `Chi tiết ${category}`,\n      open: showDetailModal,\n      onCancel: () => setShowDetailModal(false),\n      footer: null,\n      children: detailData ? /*#__PURE__*/_jsxDEV(Form, {\n        layout: \"vertical\",\n        children: Object.entries(detailData).map(([key, value]) => /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 600\n            },\n            children: key\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 40\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: String(value !== null && value !== void 0 ? value : \"Không có\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 33\n          }, this)\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 9\n  }, this);\n};\n_s(ListDisplay, \"w5aS8EM46dfc6gyD/9JYdSd5lqk=\");\n_c = ListDisplay;\nexport default ListDisplay;\nvar _c;\n$RefreshReg$(_c, \"ListDisplay\");","map":{"version":3,"names":["useState","useEffect","Table","Input","Pagination","Spin","Modal","Form","SearchOutlined","toast","axios","getColumnsConfig","jsxDEV","_jsxDEV","API_URLS","product","brand","category","discount","variant","image","color","size","material","supplier","role","ListDisplay","_s","data","setData","loading","setLoading","currentPage","setCurrentPage","totalItems","setTotalItems","searchTerm","setSearchTerm","setCategory","updateApi","setUpdateApi","editingKey","setEditingKey","editingValue","setEditingValue","pageSize","setPageSize","showDetailModal","setShowDetailModal","detailData","setDetailData","selectedId","setSelectedId","map","categoriesWithImage","includes","fetchData","response","get","headers","Authorization","localStorage","getItem","content","totalElements","error","_error$response","_error$response$data","message","handleToggleActive","itemId","newStatus","idKey","patch","success","prevData","item","_response$data","_error$response2","_error$response2$data","handleImageChange","e","record","_e$target$files","file","target","files","updateUrl","formData","FormData","append","updatedItem","logo","name","formPayload","res","put","newLogoUrl","_error$response3","_error$response3$data","handleEdit","dataIndex","saveEdit","newData","index","findIndex","_error$response4","_error$response4$data","handleIdDoubleClick","id","apiMap","_error$response5","_error$response5$data","handleDelete","deleteUrl","delete","filter","_error$response6","_error$response6$data","renderCell","text","isEditing","value","onChange","onPressEnter","onBlur","autoFocus","fileName","_jsxFileName","lineNumber","columnNumber","onDoubleClick","children","className","categories","label","columns","cat","onClick","prefix","placeholder","dataSource","pagination","rowKey","rowClassName","current","total","showSizeChanger","showQuickJumper","title","open","onCancel","footer","layout","Object","entries","key","Item","style","fontWeight","String","_c","$RefreshReg$"],"sources":["D:/C_Fashion_Shopping/Frontend/src/pages/AdminPage/ListDisplay.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Table, Input, Pagination, Spin, Modal, Form } from \"antd\";\r\nimport { SearchOutlined } from \"@ant-design/icons\";\r\nimport toast from \"react-hot-toast\";\r\nimport axios from \"axios\";\r\nimport { getColumnsConfig } from \"src/constants/columnsConfig\";\r\n\r\nconst API_URLS = {\r\n    product: \"/api/products/all\",\r\n    brand: \"/api/brands/all\",\r\n    category: \"/api/categories/all\",\r\n    discount: \"/api/discounts/all\",\r\n    variant: \"/api/variants/all\",\r\n    image: \"/api/images/all\",\r\n    color: \"/api/colors/all\",\r\n    size: \"/api/sizes/all\",\r\n    material: \"/api/materials/all\",\r\n    supplier: \"/api/suppliers/all\",\r\n    role: \"/api/roles/all\",\r\n};\r\n\r\nconst ListDisplay = () => {\r\n    const [data, setData] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalItems, setTotalItems] = useState(0);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [category, setCategory] = useState<\"product\" | \"variant\" | \"image\" | \"color\" | \"size\" | \"material\" | \"supplier\" | \"role\" | \"brand\" | \"category\" | \"discount\">(\"product\");\r\n    const [updateApi, setUpdateApi] = useState<string>(\"\");\r\n    const [editingKey, setEditingKey] = useState<string | null>(null);\r\n    const [editingValue, setEditingValue] = useState<string>(\"\");\r\n    const [pageSize, setPageSize] = useState(5);  // Default page size is 8\r\n    const [showDetailModal, setShowDetailModal] = useState(false);\r\n    const [detailData, setDetailData] = useState<any>(null);\r\n    const [selectedId, setSelectedId] = useState<number | null>(null);\r\n\r\n    useEffect(() => {\r\n        const map: Record<typeof category, string> = {\r\n            product: \"products\",\r\n            brand: \"brands\",\r\n            category: \"categories\",\r\n            discount: \"discounts\",\r\n            variant: \"variants\",\r\n            image: \"images\",\r\n            color: \"colors\",\r\n            size: \"sizes\",\r\n            material: \"materials\",\r\n            supplier: \"suppliers\",\r\n            role: \"roles\",\r\n        };\r\n        setUpdateApi(map[category]);\r\n    }, [category]);\r\n\r\n    useEffect(() => {\r\n        // Set page size tùy theo category có ảnh hay không\r\n        const categoriesWithImage = [\"brand\", \"image\"]; // các bảng có ảnh logo, image,...\r\n        if (categoriesWithImage.includes(category)) {\r\n            setCurrentPage(1);\r\n            setPageSize(5);\r\n        } else {\r\n            setPageSize(6);\r\n            setCurrentPage(1);\r\n        }\r\n    }, [category]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [currentPage, category, pageSize]);\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axios.get(`${API_URLS[category]}?page=${currentPage - 1}&size=${pageSize}`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                }\r\n            });\r\n            const { content, totalElements } = response.data;\r\n            if (totalElements === 0 && currentPage > 1) {\r\n                setCurrentPage(1);\r\n            } else {\r\n                setData(content);\r\n                setTotalItems(totalElements);\r\n            }\r\n        } catch (error: any) {\r\n            toast.error(error.response?.data?.message || \"Lỗi khi tải dữ liệu!\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleToggleActive = async (itemId: number, newStatus: boolean) => {\r\n        const idKey = `${category}Id`;\r\n\r\n        try {\r\n            const response = await axios.patch(\r\n                `/api/${updateApi}/${itemId}/status?isActive=${newStatus}`,\r\n                {},\r\n                {\r\n                    headers: {\r\n                        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\r\n                    }\r\n                }\r\n            );\r\n\r\n            if (response.data.success) {\r\n                toast.success(\"Cập nhật trạng thái thành công!\");\r\n                setData((prevData) =>\r\n                    prevData.map((item) =>\r\n                        item[idKey] === itemId\r\n                            ? {\r\n                                ...item,\r\n                                // Dùng key khác nếu là `role`\r\n                                [category === \"role\" ? \"loginAllowed\" : \"isActive\"]: newStatus\r\n                            }\r\n                            : item\r\n                    )\r\n                );\r\n            } else {\r\n                toast.error(response?.data?.message || \"Lỗi khi cập nhật trạng thái!\");\r\n            }\r\n        } catch (error: any) {\r\n            toast.error(error.response?.data?.message || \"Lỗi kết nối server!\");\r\n        }\r\n    };\r\n\r\n    const handleImageChange = async (e: React.ChangeEvent<HTMLInputElement>, record: any) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        const idKey = `${category}Id`;\r\n        const updateUrl = `/api/${updateApi}/${record[idKey]}/upload`;\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n\r\n        try {\r\n            const updatedItem = {\r\n                ...record,\r\n                logo: file.name, // hoặc giữ nguyên path nếu backend không cần tên mới\r\n            };\r\n\r\n            const formPayload = new FormData();\r\n            formPayload.append(\"logo\", file);\r\n\r\n            const res = await axios.put(updateUrl, formPayload, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                    \"Content-Type\": \"multipart/form-data\"\r\n                }\r\n            });\r\n\r\n            const newLogoUrl = res.data.logo;\r\n\r\n            setData((prevData) =>\r\n                prevData.map((item) =>\r\n                    item[idKey] === record[idKey] ? { ...item, logo: newLogoUrl } : item\r\n                )\r\n            );\r\n            toast.success(\"Cập nhật ảnh thành công!\");\r\n        } catch (error: any) {\r\n            toast.error(error.response?.data?.message || \"⚠️ Lỗi khi cập nhật ảnh!\");\r\n        }\r\n    };\r\n\r\n    const handleEdit = (record: any, dataIndex: string) => {\r\n        setEditingKey(`${record[`${category}Id`]}-${dataIndex}`);\r\n        setEditingValue(record[dataIndex]);\r\n    };\r\n\r\n    const saveEdit = async (record: any, dataIndex: string) => {\r\n        const idKey = `${category}Id`;\r\n        const updateUrl = `/api/${updateApi}/${record[idKey]}`;\r\n\r\n        try {\r\n            const updatedItem = {\r\n                ...record,\r\n                [dataIndex]: editingValue,\r\n            };\r\n\r\n            await axios.put(updateUrl, updatedItem, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`\r\n                }\r\n            });\r\n\r\n            const newData = [...data];\r\n            const index = newData.findIndex((item) => item[idKey] === record[idKey]);\r\n            if (index > -1) {\r\n                newData[index] = updatedItem;\r\n                setData(newData);\r\n                toast.success(\"Cập nhật thành công!\");\r\n            }\r\n        } catch (error: any) {\r\n            toast.error(error.response?.data?.message || \"⚠️ Lỗi khi cập nhật dữ liệu!\");\r\n        } finally {\r\n            setEditingKey(null);\r\n            setEditingValue(\"\");\r\n        }\r\n    };\r\n\r\n    const handleIdDoubleClick = async (id: number) => {\r\n        const apiMap: Record<string, string> = {\r\n            product: `/api/products/${id}`,\r\n            brand: `/api/brands/${id}`,\r\n            category: `/api/categories/${id}`,\r\n            discount: `/api/discounts/${id}`,\r\n        };\r\n\r\n        try {\r\n            const res = await axios.get(apiMap[category], {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`\r\n                }\r\n            });\r\n\r\n            setDetailData(res.data);\r\n            setSelectedId(id);\r\n            setShowDetailModal(true);\r\n        } catch (error: any) {\r\n            toast.error(error.response?.data?.message || \"Không thể tải chi tiết!\");\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (record: any) => {\r\n        const idKey = `${category}Id`;\r\n        const deleteUrl = `/api/${updateApi}/${record[idKey]}`;\r\n\r\n        try {\r\n            const response = await axios.delete(deleteUrl, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`\r\n                }\r\n            });\r\n\r\n            if (response.data.success) {\r\n                toast.success(\"Xóa thành công!\");\r\n                setData((prevData) => prevData.filter(item => item[idKey] !== record[idKey]));\r\n            } else {\r\n                toast.error(\"Lỗi khi xóa!\");\r\n            }\r\n        } catch (error: any) {\r\n            toast.error(error.response?.data?.message || \"⚠️ Lỗi kết nối khi xóa!\");\r\n        }\r\n    };\r\n\r\n    const renderCell = (text: any, record: any, dataIndex: string) => {\r\n        const isEditing = editingKey === `${record[`${category}Id`]}-${dataIndex}`;\r\n        if (isEditing) {\r\n            return (\r\n                <Input\r\n                    value={editingValue}\r\n                    onChange={(e) => setEditingValue(e.target.value)}\r\n                    onPressEnter={() => saveEdit(record, dataIndex)}\r\n                    onBlur={() => saveEdit(record, dataIndex)}\r\n                    autoFocus\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <div onDoubleClick={() => handleEdit(record, dataIndex)}>\r\n                {text || <i className=\"text-gray-400\">Chưa có</i>}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const categories = [\r\n        { value: \"product\", label: \"Sản phẩm\" },\r\n        { value: \"variant\", label: \"Biến thể\" },\r\n        { value: \"image\", label: \"Hình ảnh sản phẩm\" },\r\n        { value: \"color\", label: \"Màu sắc\" },\r\n        { value: \"size\", label: \"Kích thước\" },\r\n        { value: \"material\", label: \"Chất liệu\" },\r\n        { value: \"supplier\", label: \"Nhà cung cấp\" },\r\n        { value: \"role\", label: \"Vai trò\" },\r\n        { value: \"brand\", label: \"Thương hiệu\" },\r\n        { value: \"category\", label: \"Loại sản phẩm\" },\r\n        { value: \"discount\", label: \"Mã giảm giá\" },\r\n    ];\r\n\r\n    const columns = getColumnsConfig(category, renderCell, handleToggleActive, handleImageChange, handleIdDoubleClick, handleDelete);\r\n\r\n    return (\r\n        <div className=\"p-4 rounded-lg shadow-xl\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n                <div className=\"flex space-x-3\">\r\n                    {categories.map((cat) => (\r\n                        <button\r\n                            key={cat.value}\r\n                            onClick={() => setCategory(cat.value as any)}\r\n                            className={`px-5 py-2 rounded-lg text-sm font-semibold transition-all ${category === cat.value\r\n                                ? \"bg-gradient-to-r from-green-500 to-green-700 text-white shadow-md\"\r\n                                : \"bg-gray-300 text-gray-800 hover:bg-green-500 hover:text-white\"}`}\r\n                        >\r\n                            {cat.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n                <Input\r\n                    prefix={<SearchOutlined className=\"text-gray-500\" />}\r\n                    placeholder=\"Tìm kiếm...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    className=\"w-72 px-4 py-2 rounded-lg border border-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500 transition-all bg-white shadow-sm focus:shadow-lg\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"border border-green-300 rounded-lg shadow-md overflow-hidden\">\r\n                {loading ? (\r\n                    <div className=\"flex justify-center p-4\">\r\n                        <Spin size=\"large\" />\r\n                    </div>\r\n                ) : (\r\n                    <Table\r\n                        columns={getColumnsConfig(category, renderCell, handleToggleActive, handleImageChange, handleIdDoubleClick, handleDelete)}\r\n                        dataSource={data}\r\n                        pagination={false}\r\n                        rowKey={(record) => record[`${category}Id`]}\r\n                        rowClassName={(record, index) => (index % 2 === 0 ? \"bg-green-100\" : \"bg-white\")}\r\n                        className=\"border-none\"\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"flex justify-end mt-4\">\r\n                <Pagination\r\n                    current={currentPage}\r\n                    pageSize={pageSize}\r\n                    total={totalItems}\r\n                    onChange={setCurrentPage}\r\n                    showSizeChanger={false}\r\n                    showQuickJumper\r\n                />\r\n            </div>\r\n            <Modal\r\n                title={`Chi tiết ${category}`}\r\n                open={showDetailModal}\r\n                onCancel={() => setShowDetailModal(false)}\r\n                footer={null}\r\n            >\r\n                {detailData ? (\r\n                    <Form layout=\"vertical\">\r\n                        {Object.entries(detailData).map(([key, value]) => (\r\n                            <Form.Item\r\n                                key={key}\r\n                                label={<span style={{ fontWeight: 600 }}>{key}</span>}\r\n                            >\r\n                                <Input value={String(value ?? \"Không có\")} />\r\n                            </Form.Item>\r\n                        ))}\r\n                    </Form>\r\n                ) : (\r\n                    <Spin />\r\n                )}\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ListDisplay;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}